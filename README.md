README ‚Äî ‡πÅ‡∏≠‡∏û‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (Flutter + http + provider + Open-Meteo)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡∏™‡∏≤‡∏ò‡∏¥‡∏ï‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á ‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô / ‡∏£‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á / ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô 7 ‡∏ß‡∏±‡∏ô ‡∏à‡∏≤‡∏Å Open-Meteo API ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏î‡πâ‡∏ß‡∏¢ Flutter ‡πÇ‡∏î‡∏¢‡πÅ‡∏¢‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏±‡πâ‡∏ô data / models / services / providers / UI ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏Å latitude/longitude ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç

‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô

‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô API ‡∏à‡∏≤‡∏Å URL

‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏•‡∏≤‡∏™‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Models)

‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô http ‡πÅ‡∏•‡∏∞ provider

‡∏Å‡∏≤‡∏£‡∏ô‡∏≥ http ‡πÅ‡∏•‡∏∞ provider ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ

‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏õ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•

‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î

‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏ï‡πá‡∏° (5 ‡πÑ‡∏ü‡∏•‡πå)

Troubleshooting ‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå

‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
lib/
  data/
    th_cities.dart            # ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏±‡∏î
  models/
    weather_models.dart       # City, HourlyForecast, DailyForecast, WeatherData
  services/
    weather_service.dart      # ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API + map JSON -> models
  providers/
    weather_provider.dart     # ChangeNotifier: state + actions
  main.dart                   # UI: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ / ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô / ‡∏£‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á / ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô + ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î


‡πÅ‡∏¢‡∏Å‡∏ä‡∏±‡πâ‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô:
Service ‡∏Ñ‡∏∏‡∏¢ API ‚Üí Provider ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ state ‚Üí UI listen state ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•

‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô

pubspec.yaml (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ dependencies ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)

dependencies:
  flutter:
    sdk: flutter
  http: ^1.2.2
  provider: ^6.1.2
  intl: ^0.19.0


‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï (Android)
android/app/src/main/AndroidManifest.xml (‡∏ô‡∏≠‡∏Å <application>)

<uses-permission android:name="android.permission.INTERNET" />


‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à

flutter pub get


‡∏£‡∏±‡∏ô

flutter run

‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô API ‡∏à‡∏≤‡∏Å URL

‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ Open-Meteo 2 ‡∏à‡∏∏‡∏î‡∏´‡∏•‡∏±‡∏Å:

Geocoding (‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‚Üí lat/lon)
https://geocoding-api.open-meteo.com/v1/search?name=Bangkok&count=1&language=th&format=json

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:

{
  "results": [
    {
      "name": "Bangkok",
      "country": "Thailand",
      "latitude": 13.75398,
      "longitude": 100.50144
    }
  ]
}


Forecast (‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå)
https://api.open-meteo.com/v1/forecast?latitude=13.75&longitude=100.50&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,weather_code,wind_speed_10m&hourly=temperature_2m,apparent_temperature,weather_code,precipitation_probability,wind_speed_10m&daily=temperature_2m_max,temperature_2m_min,weather_code,precipitation_sum&timezone=auto

‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:

current.* ‚Üí ‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô, ‡∏£‡∏´‡∏±‡∏™‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏®, ‡∏•‡∏°, ‡∏Ø‡∏•‡∏Ø)

hourly.time, hourly.temperature_2m, hourly.weather_code, ‚Ä¶

daily.time, daily.temperature_2m_max, daily.temperature_2m_min, daily.weather_code, daily.precipitation_sum

‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: weather_code ‡πÉ‡∏ä‡πâ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô WMO (‡πÄ‡∏£‡∏≤ map ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°/emoji ‡πÉ‡∏ô service)

‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å API ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏•‡∏≤‡∏™‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Models)

‡πÄ‡∏£‡∏≤‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÇ‡∏°‡πÄ‡∏î‡∏•‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•:

City ‚Äî ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á/‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®/‡∏û‡∏¥‡∏Å‡∏±‡∏î

HourlyForecast ‚Äî ‡πÄ‡∏ß‡∏•‡∏≤, ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥, ‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏®, ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ù‡∏ô, ‡∏•‡∏°, feels-like

DailyForecast ‚Äî ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î/‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î, ‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏®, ‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ù‡∏ô‡∏£‡∏ß‡∏°

WeatherData ‚Äî ‡∏£‡∏ß‡∏° current + hourly list + daily list ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:

UI ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ JSON structure ‡∏Ç‡∏≠‡∏á API)

Service ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏• mapping/normalize ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô http ‡πÅ‡∏•‡∏∞ provider
http

‡πÉ‡∏ä‡πâ http.get(Uri.parse(url)) ‡πÅ‡∏ö‡∏ö async (await)

‡πÄ‡∏ä‡πá‡∏Ñ statusCode == 200 ‡∏Å‡πà‡∏≠‡∏ô parse

‡πÅ‡∏¢‡∏Å‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÉ‡∏ô WeatherService ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö/‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏á‡πà‡∏≤‡∏¢

provider

‡πÉ‡∏ä‡πâ ChangeNotifier ‡πÄ‡∏õ‡πá‡∏ô state manager ‡πÄ‡∏ö‡∏≤‡πÜ

WeatherProvider ‡πÄ‡∏Å‡πá‡∏ö state: city, weather, loading, error

‡πÄ‡∏£‡∏µ‡∏¢‡∏Å notifyListeners() ‡∏´‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ UI rebuild

UI ‡πÉ‡∏ä‡πâ context.watch<WeatherProvider>() ‡∏´‡∏£‡∏∑‡∏≠ Consumer<WeatherProvider>() ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ü‡∏±‡∏á state

‡∏Å‡∏≤‡∏£‡∏ô‡∏≥ http ‡πÅ‡∏•‡∏∞ provider ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÅ‡∏≠‡∏õ

Flow ‡∏´‡∏•‡∏±‡∏Å:

‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‚Üí provider.searchAndLoad(name)

Provider ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å WeatherService.searchCity ‡∏´‡∏≤ lat/lon

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô WeatherService.fetchWeather(lat, lon) ‡∏î‡∏∂‡∏á‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå

Provider ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô state ‡πÅ‡∏•‡∏∞ notifyListeners()

UI ‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô/‡∏£‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á/‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô

‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©:

‡∏õ‡∏∏‡πà‡∏°/‡πÑ‡∏î‡∏≠‡∏∞‡∏•‡πá‡∏≠‡∏Å‡∏Å‡∏£‡∏≠‡∏Å lat/lon ‚Üí provider.loadByLatLon(lat, lon) (‡∏Ç‡πâ‡∏≤‡∏° geocoding)

‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏õ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•

Gradient background + Glassmorphism card (_Glass) ‡∏™‡∏ß‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢

Search Row: ‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ + ‡∏õ‡∏∏‡πà‡∏° search + ‡∏õ‡∏∏‡πà‡∏° location (‡∏Å‡∏£‡∏≠‡∏Å lat/lon)

Quick Chips: ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏¢‡∏≠‡∏î‡∏ô‡∏¥‡∏¢‡∏° (‡∏à‡∏≤‡∏Å th_cities.dart)

Current card: Emoji + ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ + ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥/feels-like/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô/‡∏•‡∏°

Hourly list (‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô): 12 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ, ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á 150 ‡πÅ‡∏•‡∏∞ mainAxisSize.min ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô overflow

Daily list (7 ‡∏ß‡∏±‡∏ô): ‡∏ß‡∏±‡∏ô/emoji/‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î-‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î/‡∏ù‡∏ô‡∏£‡∏ß‡∏°

‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
WeatherService.searchCity(name)

‡∏™‡∏£‡πâ‡∏≤‡∏á URL geocoding

http.get ‚Üí ‡πÄ‡∏ä‡πá‡∏Ñ 200 ‚Üí jsonDecode

‡∏î‡∏∂‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏£‡∏Å ‡πÄ‡∏≠‡∏≤ name,country,latitude,longitude ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á City

WeatherService.fetchWeather(lat, lon)

‡∏™‡∏£‡πâ‡∏≤‡∏á URL forecast ‡∏û‡∏£‡πâ‡∏≠‡∏° current, hourly, daily

http.get ‚Üí ‡πÄ‡∏ä‡πá‡∏Ñ 200 ‚Üí jsonDecode

Hourly: ‡∏≠‡πà‡∏≤‡∏ô list ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏ü‡∏¥‡∏•‡∏î‡πå ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á HourlyForecast ‡∏ó‡∏µ‡∏•‡∏∞ index (‡∏ï‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ)

Daily: ‡∏≠‡πà‡∏≤‡∏ô time/max/min/code/rainSum ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á DailyForecast

Current: ‡∏≠‡πà‡∏≤‡∏ô temperature_2m, relative_humidity_2m, apparent_temperature, weather_code, wind_speed_10m, is_day

‡∏Ñ‡∏∑‡∏ô WeatherData(hourly: hourList, daily: dailyList, ‚Ä¶)

WeatherService.describeWMO/emojiForWMO

Map weather_code ‚Üí ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ó‡∏¢/emoji ‡πÉ‡∏ä‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÉ‡∏ô UI

WeatherProvider

searchAndLoad(name) ‚Üí geocode ‚Üí fetch ‚Üí set state

refresh() ‚Üí ‡πÇ‡∏´‡∏•‡∏î‡∏ã‡πâ‡∏≥‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°

loadByLatLon(lat, lon) ‚Üí fetch ‡∏ï‡∏£‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏¥‡∏Å‡∏±‡∏î ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß‡πÄ‡∏õ‡πá‡∏ô Lat xx, Lon yy

UI (main.dart)

‡πÉ‡∏ä‡πâ ChangeNotifierProvider ‡∏Ñ‡∏£‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ

WeatherHomePage ‡∏ü‡∏±‡∏á state ‡∏î‡πâ‡∏ß‡∏¢ context.watch<WeatherProvider>()

‡∏à‡∏±‡∏î‡πÄ‡∏•‡∏¢‡πå‡πÄ‡∏≠‡∏≤‡∏ï‡πå‡∏î‡πâ‡∏ß‡∏¢ ListView ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏Å‡πâ overflow)

_HourlyList ‡∏ï‡∏±‡πâ‡∏á height: 150 + mainAxisSize.min ‡πÉ‡∏ô Column

_DailyList ‡πÉ‡∏ä‡πâ Column ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡πÅ‡∏ñ‡∏ß (‡∏ï‡∏±‡∏î .take(7))

‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏ï‡πá‡∏° (5 ‡πÑ‡∏ü‡∏•‡πå)

‚¨áÔ∏è ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ä‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏ó‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)

lib/data/th_cities.dart
const thCities = <String>[
  'Bangkok','Chiang Mai','Chiang Rai','Phuket','Khon Kaen',
  'Nakhon Ratchasima','Rayong','Pattaya','Ayutthaya','Hat Yai',
];

lib/models/weather_models.dart
class City {
  final String name;
  final String? country;
  final double latitude;
  final double longitude;
  const City({required this.name, this.country, required this.latitude, required this.longitude});
}

class HourlyForecast {
  final DateTime time;
  final double temp;
  final int weatherCode;
  final int precipProb;
  final double wind;
  final double apparent;
  const HourlyForecast({
    required this.time, required this.temp, required this.weatherCode,
    required this.precipProb, required this.wind, required this.apparent,
  });
}

class DailyForecast {
  final DateTime date;
  final double tempMax;
  final double tempMin;
  final int weatherCode;
  final double rainSum;
  const DailyForecast({
    required this.date, required this.tempMax, required this.tempMin,
    required this.weatherCode, required this.rainSum,
  });
}

class WeatherData {
  final double temperature;
  final double humidity;
  final double apparent;
  final int weatherCode;
  final double windSpeed;
  final bool isDay;
  final List<HourlyForecast> hourly;
  final List<DailyForecast> daily;
  const WeatherData({
    required this.temperature, required this.humidity, required this.apparent,
    required this.weatherCode, required this.windSpeed, required this.isDay,
    required this.hourly, required this.daily,
  });
}

lib/services/weather_service.dart
import 'dart:convert';
import 'package:http/http.dart' as http;
import '../models/weather_models.dart';

class WeatherService {
  static Future<City?> searchCity(String name) async {
    final url = Uri.parse(
      'https://geocoding-api.open-meteo.com/v1/search'
      '?name=${Uri.encodeComponent(name)}&count=1&language=th&format=json',
    );
    final res = await http.get(url);
    if (res.statusCode != 200) throw Exception('‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß');
    final data = jsonDecode(res.body);
    final list = (data?['results'] as List?) ?? [];
    if (list.isEmpty) return null;
    final r = list.first as Map<String, dynamic>;
    return City(
      name: (r['name'] ?? '').toString(),
      country: r['country'],
      latitude: (r['latitude'] as num).toDouble(),
      longitude: (r['longitude'] as num).toDouble(),
    );
  }

  static Future<WeatherData> fetchWeather(double lat, double lon) async {
    final url = Uri.parse(
      'https://api.open-meteo.com/v1/forecast'
      '?latitude=$lat&longitude=$lon'
      '&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,weather_code,wind_speed_10m'
      '&hourly=temperature_2m,apparent_temperature,weather_code,precipitation_probability,wind_speed_10m'
      '&daily=temperature_2m_max,temperature_2m_min,weather_code,precipitation_sum'
      '&timezone=auto',
    );

    final res = await http.get(url);
    if (res.statusCode != 200) throw Exception('‡∏î‡∏∂‡∏á‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (${res.statusCode})');
    final data = jsonDecode(res.body);

    // Hourly
    final hourly = (data['hourly'] as Map?) ?? {};
    final times = (hourly['time'] as List? ?? []).cast<String>();
    final temps = (hourly['temperature_2m'] as List? ?? []).cast<num>();
    final codes = (hourly['weather_code'] as List? ?? []).cast<num>();
    final precs = (hourly['precipitation_probability'] as List? ?? []).cast<num>();
    final winds = (hourly['wind_speed_10m'] as List? ?? []).cast<num>();
    final apparents = (hourly['apparent_temperature'] as List? ?? []).cast<num>();

    final hourList = <HourlyForecast>[];
    final n = [times.length, temps.length, codes.length, precs.length, winds.length, apparents.length]
        .reduce((a, b) => a < b ? a : b);
    for (var i = 0; i < n; i++) {
      hourList.add(HourlyForecast(
        time: DateTime.parse(times[i]),
        temp: temps[i].toDouble(),
        weatherCode: codes[i].toInt(),
        precipProb: precs[i].toInt(),
        wind: winds[i].toDouble(),
        apparent: apparents[i].toDouble(),
      ));
    }

    // Daily
    final daily = (data['daily'] as Map?) ?? {};
    final dTimes = (daily['time'] as List? ?? []).cast<String>();
    final dMax = (daily['temperature_2m_max'] as List? ?? []).cast<num>();
    final dMin = (daily['temperature_2m_min'] as List? ?? []).cast<num>();
    final dCode = (daily['weather_code'] as List? ?? []).cast<num>();
    final dRain = (daily['precipitation_sum'] as List? ?? []).cast<num>();

    final dailyList = <DailyForecast>[];
    final dn = [dTimes.length, dMax.length, dMin.length, dCode.length, dRain.length]
        .reduce((a, b) => a < b ? a : b);
    for (var i = 0; i < dn; i++) {
      dailyList.add(DailyForecast(
        date: DateTime.parse(dTimes[i]),
        tempMax: dMax[i].toDouble(),
        tempMin: dMin[i].toDouble(),
        weatherCode: dCode[i].toInt(),
        rainSum: dRain[i].toDouble(),
      ));
    }

    final current = (data['current'] as Map?) ?? {};
    return WeatherData(
      temperature: (current['temperature_2m'] as num? ?? 0).toDouble(),
      humidity: (current['relative_humidity_2m'] as num? ?? 0).toDouble(),
      apparent: (current['apparent_temperature'] as num? ?? 0).toDouble(),
      weatherCode: (current['weather_code'] as num? ?? 0).toInt(),
      windSpeed: (current['wind_speed_10m'] as num? ?? 0).toDouble(),
      isDay: (current['is_day'] as num? ?? 1) == 1,
      hourly: hourList,
      daily: dailyList,
    );
  }

  static String describeWMO(int code) {
    const map = {
      0:'‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡πÅ‡∏à‡πà‡∏°‡πÉ‡∏™',1:'‡πÅ‡∏î‡∏î‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô',2:'‡πÄ‡∏°‡∏Ü‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô',3:'‡πÄ‡∏°‡∏Ü‡∏°‡∏≤‡∏Å',
      45:'‡∏´‡∏°‡∏≠‡∏Å',51:'‡∏ù‡∏ô‡∏õ‡∏£‡∏≠‡∏¢',61:'‡∏ù‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢',63:'‡∏ù‡∏ô‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',65:'‡∏ù‡∏ô‡∏´‡∏ô‡∏±‡∏Å',
      71:'‡∏´‡∏¥‡∏°‡∏∞',80:'‡∏ù‡∏ô‡∏ã‡∏π‡πà',95:'‡∏û‡∏≤‡∏¢‡∏∏‡∏ù‡∏ô‡∏ü‡πâ‡∏≤‡∏Ñ‡∏∞‡∏ô‡∏≠‡∏á',
    };
    return map[code] ?? '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö';
  }

  static String emojiForWMO(int code) {
    if (code == 0) return '‚òÄÔ∏è';
    if ([1, 2].contains(code)) return 'üå§Ô∏è';
    if (code == 3) return '‚òÅÔ∏è';
    if ({51,61,63,65,80}.contains(code)) return 'üåßÔ∏è';
    if ({95}.contains(code)) return '‚õàÔ∏è';
    if ({71}.contains(code)) return '‚ùÑÔ∏è';
    if ({45}.contains(code)) return 'üå´Ô∏è';
    return 'üå°Ô∏è';
  }
}

lib/providers/weather_provider.dart
import 'package:flutter/foundation.dart';
import '../models/weather_models.dart';
import '../services/weather_service.dart';

class WeatherProvider extends ChangeNotifier {
  City? city;
  WeatherData? weather;
  bool loading = false;
  String? error;

  Future<void> searchAndLoad(String name) async {
    loading = true; error = null; notifyListeners();
    try {
      final c = await WeatherService.searchCity(name);
      if (c == null) {
        error = '‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏°‡∏∑‡∏≠‡∏á: $name'; weather = null; city = null;
      } else {
        city = c;
        weather = await WeatherService.fetchWeather(c.latitude, c.longitude);
      }
    } catch (e) {
      error = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: $e';
    } finally { loading = false; notifyListeners(); }
  }

  Future<void> refresh() async {
    if (city == null) return;
    await searchAndLoad(city!.name);
  }

  Future<void> loadByLatLon(double lat, double lon) async {
    loading = true; error = null; notifyListeners();
    try {
      weather = await WeatherService.fetchWeather(lat, lon);
      city = City(
        name: 'Lat ${lat.toStringAsFixed(2)}, Lon ${lon.toStringAsFixed(2)}',
        latitude: lat, longitude: lon,
      );
    } catch (e) {
      error = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: $e';
    } finally { loading = false; notifyListeners(); }
  }
}

lib/main.dart
import 'dart:ui';
import 'package:flutter/material.dart';
import 'package:provider/provider.dart';
import 'package:intl/intl.dart';
import 'package:intl/date_symbol_data_local.dart';

import 'data/th_cities.dart';
import 'models/weather_models.dart';
import 'providers/weather_provider.dart';
import 'services/weather_service.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await initializeDateFormatting('th_TH');
  runApp(
    ChangeNotifierProvider(
      create: (_) => WeatherProvider()..searchAndLoad('Chiang Mai'),
      child: const WeatherApp(),
    ),
  );
}

class WeatherApp extends StatelessWidget {
  const WeatherApp({super.key});
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: '‡πÉ‡∏™-Weather',
      debugShowCheckedModeBanner: false,
      theme: ThemeData(useMaterial3: true),
      home: const WeatherHomePage(),
    );
  }
}

class WeatherHomePage extends StatefulWidget {
  const WeatherHomePage({super.key});
  @override
  State<WeatherHomePage> createState() => _WeatherHomePageState();
}

class _WeatherHomePageState extends State<WeatherHomePage> {
  final _controller = TextEditingController(text: 'Chiang Mai');

  Future<void> _showLatLonDialog() async {
    final latCtl = TextEditingController();
    final lonCtl = TextEditingController();
    await showDialog(
      context: context,
      builder: (_) => AlertDialog(
        title: const Text('‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î'),
        content: Column(
          mainAxisSize: MainAxisSize.min,
          children: [
            TextField(
              controller: latCtl,
              keyboardType: const TextInputType.numberWithOptions(decimal: true, signed: true),
              decoration: const InputDecoration(labelText: 'Latitude (‡πÄ‡∏ä‡πà‡∏ô 13.7563)'),
            ),
            TextField(
              controller: lonCtl,
              keyboardType: const TextInputType.numberWithOptions(decimal: true, signed: true),
              decoration: const InputDecoration(labelText: 'Longitude (‡πÄ‡∏ä‡πà‡∏ô 100.5018)'),
            ),
          ],
        ),
        actions: [
          TextButton(onPressed: () => Navigator.pop(context), child: const Text('‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å')),
          ElevatedButton(
            onPressed: () {
              final lat = double.tryParse(latCtl.text.trim());
              final lon = double.tryParse(lonCtl.text.trim());
              if (lat == null || lon == null) return;
              context.read<WeatherProvider>().loadByLatLon(lat, lon);
              Navigator.pop(context);
            },
            child: const Text('‡∏ï‡∏Å‡∏•‡∏á'),
          ),
        ],
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    final prov = context.watch<WeatherProvider>();

    final gradient = const LinearGradient(
      begin: Alignment.topLeft,
      end: Alignment.bottomRight,
      colors: [Color(0xFF74EBD5), Color(0xFF9FACE6)],
    );

    return Scaffold(
      body: Container(
        decoration: BoxDecoration(gradient: gradient),
        child: SafeArea(
          child: RefreshIndicator(
            onRefresh: prov.refresh,
            child: ListView(
              padding: const EdgeInsets.fromLTRB(16, 16, 16, 24),
              children: [
                Row(
                  children: [
                    Expanded(
                      child: _Glass(
                        child: TextField(
                          controller: _controller,
                          textInputAction: TextInputAction.search,
                          decoration: const InputDecoration(
                            hintText: '‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô Bangkok, Chiang Mai',
                            border: InputBorder.none,
                            prefixIcon: Icon(Icons.search),
                          ),
                          onSubmitted: (v) {
                            final q = v.trim();
                            if (q.isNotEmpty) context.read<WeatherProvider>().searchAndLoad(q);
                          },
                        ),
                      ),
                    ),
                    const SizedBox(width: 12),
                    _CircleButton(
                      icon: Icons.search,
                      onTap: () {
                        final q = _controller.text.trim();
                        if (q.isNotEmpty) context.read<WeatherProvider>().searchAndLoad(q);
                      },
                    ),
                    const SizedBox(width: 12),
                    _CircleButton(
                      icon: Icons.location_searching,
                      onTap: _showLatLonDialog,
                    ),
                  ],
                ),
                const SizedBox(height: 8),
                Wrap(
                  spacing: 8,
                  runSpacing: 8,
                  children: thCities.take(8).map((c) {
                    return ActionChip(
                      label: Text(c),
                      onPressed: () {
                        _controller.text = c;
                        context.read<WeatherProvider>().searchAndLoad(c);
                      },
                    );
                  }).toList(),
                ),
                const SizedBox(height: 16),

                if (prov.loading)
                  const Center(child: Padding(
                    padding: EdgeInsets.all(24.0),
                    child: CircularProgressIndicator(),
                  )),

                if (prov.error != null && !prov.loading)
                  _Glass(padding: const EdgeInsets.all(16), child: Text(prov.error!, style: const TextStyle(color: Colors.red))),

                if (prov.weather != null && !prov.loading) ...[
                  _HeaderCity(city: prov.city!),
                  const SizedBox(height: 12),
                  _CurrentWeatherCard(data: prov.weather!),
                  const SizedBox(height: 16),
                  const Text('‡∏£‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ', style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600)),
                  const SizedBox(height: 8),
                  _HourlyList(hourly: prov.weather!.hourly.take(12).toList()),
                  const SizedBox(height: 16),
                  const Text('‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå 7 ‡∏ß‡∏±‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ', style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600)),
                  const SizedBox(height: 8),
                  _DailyList(daily: prov.weather!.daily),
                  const SizedBox(height: 24),
                  Opacity(opacity: 0.7, child: Center(child: Text('‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: Open-Meteo'))),
                ],
              ],
            ),
          ),
        ),
      ),
    );
  }
}

/* ---------- UI Widgets ---------- */

class _Glass extends StatelessWidget {
  final Widget child;
  final EdgeInsetsGeometry? padding;
  const _Glass({required this.child, this.padding});
  @override
  Widget build(BuildContext context) {
    return ClipRRect(
      borderRadius: BorderRadius.circular(18),
      child: BackdropFilter(
        filter: ImageFilter.blur(sigmaX: 8, sigmaY: 8),
        child: Container(
          padding: padding ?? const EdgeInsets.symmetric(horizontal: 12, vertical: 8),
          decoration: BoxDecoration(
            color: Colors.white.withOpacity(0.18),
            border: Border.all(color: Colors.white.withOpacity(0.25)),
            borderRadius: BorderRadius.circular(18),
            boxShadow: [BoxShadow(color: Colors.black.withOpacity(0.08), blurRadius: 12, offset: const Offset(0, 6))],
          ),
          child: child,
        ),
      ),
    );
  }
}

class _CircleButton extends StatelessWidget {
  final IconData icon;
  final VoidCallback onTap;
  const _CircleButton({required this.icon, required this.onTap});
  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: onTap,
      child: _Glass(padding: const EdgeInsets.all(12), child: Icon(icon, size: 24)),
    );
  }
}

class _HeaderCity extends StatelessWidget {
  final City city;
  const _HeaderCity({required this.city});
  @override
  Widget build(BuildContext context) {
    return _Glass(
      padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
      child: Row(
        children: [
          const Icon(Icons.location_on_outlined),
          const SizedBox(width: 8),
          Expanded(
            child: Text(
              '${city.name}${city.country != null ? " ‚Ä¢ ${city.country}" : ""}',
              style: const TextStyle(fontSize: 20, fontWeight: FontWeight.w600),
            ),
          ),
          Text('${city.latitude.toStringAsFixed(2)}, ${city.longitude.toStringAsFixed(2)}'),
        ],
      ),
    );
  }
}

class _CurrentWeatherCard extends StatelessWidget {
  final WeatherData data;
  const _CurrentWeatherCard({required this.data});
  @override
  Widget build(BuildContext context) {
    final desc = WeatherService.describeWMO(data.weatherCode);
    final emoji = WeatherService.emojiForWMO(data.weatherCode);
    final now = DateFormat('EEE d MMM HH:mm', 'th_TH').format(DateTime.now());

    return _Glass(
      padding: const EdgeInsets.all(16),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          Text(emoji, style: const TextStyle(fontSize: 48)),
          const SizedBox(height: 4),
          Text(desc, style: const TextStyle(fontSize: 18, fontWeight: FontWeight.w600)),
          const SizedBox(height: 12),
          Row(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              Text('${data.temperature.toStringAsFixed(1)}¬∞C',
                  style: const TextStyle(fontSize: 42, fontWeight: FontWeight.w700)),
              const SizedBox(width: 12),
              Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text('‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô: ${data.apparent.toStringAsFixed(1)}¬∞C'),
                  Text('‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô: ${data.humidity.toStringAsFixed(0)}%'),
                  Text('‡∏•‡∏°: ${data.windSpeed.toStringAsFixed(0)} km/h'),
                ],
              )
            ],
          ),
          const SizedBox(height: 8),
          Opacity(opacity: 0.8, child: Text('‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï: $now')),
        ],
      ),
    );
  }
}

class _HourlyList extends StatelessWidget {
  final List<HourlyForecast> hourly;
  const _HourlyList({required this.hourly});
  @override
  Widget build(BuildContext context) {
    return SizedBox(
      height: 150,
      child: ListView.separated(
        scrollDirection: Axis.horizontal,
        itemCount: hourly.length,
        separatorBuilder: (_, __) => const SizedBox(width: 12),
        itemBuilder: (context, i) {
          final h = hourly[i];
          final t = DateFormat('HH:mm').format(h.time);
          final emoji = WeatherService.emojiForWMO(h.weatherCode);
          return SizedBox(
            width: 120,
            child: _Glass(
              padding: const EdgeInsets.all(12),
              child: Column(
                mainAxisSize: MainAxisSize.min,
                children: [
                  Text(t, style: const TextStyle(fontWeight: FontWeight.w600)),
                  const SizedBox(height: 6),
                  Text(emoji, style: const TextStyle(fontSize: 28)),
                  const SizedBox(height: 6),
                  Text('${h.temp.toStringAsFixed(0)}¬∞C'),
                  Opacity(opacity: 0.8, child: Text('‡∏ù‡∏ô ${h.precipProb} %', style: const TextStyle(fontSize: 12))),
                ],
              ),
            ),
          );
        },
      ),
    );
  }
}

class _DailyList extends StatelessWidget {
  final List<DailyForecast> daily;
  const _DailyList({required this.daily});
  @override
  Widget build(BuildContext context) {
    return Column(
      children: daily.take(7).map((d) {
        final emoji = WeatherService.emojiForWMO(d.weatherCode);
        final day = DateFormat('EEE d MMM', 'th_TH').format(d.date);
        return Padding(
          padding: const EdgeInsets.symmetric(vertical: 6),
          child: _Glass(
            padding: const EdgeInsets.all(12),
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Expanded(child: Text(day)),
                Text(emoji, style: const TextStyle(fontSize: 22)),
                const SizedBox(width: 8),
                Text('${d.tempMin.toStringAsFixed(0)}¬∞ / ${d.tempMax.toStringAsFixed(0)}¬∞C'),
                const SizedBox(width: 8),
                Opacity(opacity: 0.8, child: Text('‡∏ù‡∏ô ${d.rainSum.toStringAsFixed(1)} mm', style: const TextStyle(fontSize: 12))),
              ],
            ),
          ),
        );
      }).toList(),
    );
  }
}

screenshot
<img src="11.png" width="250">
‡∏£‡∏π‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
<img src="12.png" width="250">
‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡∏•‡∏∞‡∏ï‡∏≠‡∏à‡∏π‡∏î,‡∏•‡∏≠‡∏á‡∏ï‡∏¥‡∏à‡∏π‡∏î‡πÑ‡∏î‡πâ
<img src="13.png" width="250">
‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô , ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô , ‡∏•‡∏° , ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
<img src="14.png" width="250">
‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏±‡∏ß‡πÇ‡∏°‡∏á ‡πÅ‡∏•‡∏∞ 7 ‡∏ß‡∏±‡∏ô
<img src="15.png" width="250">
‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡πâ‡∏ô‡∏´‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏≠‡∏Ñ‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ

Troubleshooting ‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢

import 'package:intl/‚Ä¶' ‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏î‡∏á ‚Üí ‡πÉ‡∏™‡πà intl ‡πÉ‡∏ô pubspec.yaml ‡πÅ‡∏•‡πâ‡∏ß flutter pub get ‡πÅ‡∏•‡∏∞ Restart Analysis Server

Missing the required "name" field ‚Üí pubspec.yaml ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ name: ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÅ‡∏£‡∏Å ‡πÜ

iOS Debug ‡∏Ç‡∏∂‡πâ‡∏ô Local Network permission (DevTools) ‚Üí ‡πÑ‡∏°‡πà‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏õ‡∏Å‡∏ï‡∏¥

‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏£‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á Bottom overflowed ‚Üí ‡πÉ‡∏ä‡πâ height: 150 ‡πÅ‡∏•‡∏∞ mainAxisSize: MainAxisSize.min (‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô _HourlyList)

‡∏ö‡∏±‡πä‡∏Å The final variable 'data' must be initialized ‚Üí ‡∏°‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ñ‡∏•‡∏≤‡∏™‡∏ã‡πâ‡∏≥ ‡∏ï‡∏£‡∏ß‡∏à‡∏õ‡∏µ‡∏Å‡∏Å‡∏≤‡∏õ‡∏¥‡∏î }

‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå

‡πÉ‡∏ä‡πâ GPS ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à geolocator, ‡∏Ç‡∏≠ permission, ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å loadByLatLon(lat, lon)

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡πâ‡∏ô Temp/‡∏ù‡∏ô (‡πÉ‡∏ä‡πâ fl_chart ‡∏´‡∏£‡∏∑‡∏≠ recharts)

‡∏ò‡∏µ‡∏°‡∏°‡∏∑‡∏î/‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤/‡∏ü‡∏≠‡∏£‡πå‡πÅ‡∏°‡∏ï‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô




